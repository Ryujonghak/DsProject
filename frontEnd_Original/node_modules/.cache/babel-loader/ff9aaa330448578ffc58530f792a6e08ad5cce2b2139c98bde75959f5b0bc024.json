{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\n// import axios from \"axios\";   // 프로필이미지 업로드\nimport custom from \"@/assets/js/custom\";\nimport userService from \"@/services/user.service\";\n// import MovieDataService from \"@/services/MovieDataService\";\nimport ReservationDataService from \"@/services/ReservationDataService\";\nexport default {\n  // data: () => ({\n  //   images: \"\",\n  // }),\n  data() {\n    return {\n      // movie: [],    // 전체 탑텐 영화\n      watchedMovie: [],\n      // 예매한 영화\n      watchedMovieTotalCount: 0,\n      // 본 영화 갯수\n\n      emptyArchive: true,\n      // 아카이브 없는지 체크\n\n      CurrentUser: {\n        email: \"\",\n        password: \"\",\n        username: \"\",\n        phone: null,\n        year: null,\n        month: null,\n        day: null,\n        name: \"\",\n        answer: \"\" // 비번확인용 정답\n      },\n\n      message: \"\",\n      // 페이징을 위한 변수 정의\n      page: 1,\n      // 현재 페이지\n      count: 0,\n      // 전체 데이터 건수\n      pageSize: 5,\n      // 한페이지당 몇개를 화면에 보여줄지 결정하는 변수\n      pageSizes: [5, 10, 15] // select box 에 넣을 기본 데이터\n    };\n  },\n\n  methods: {\n    getUser() {\n      // 종학이 백엔드 데이터 받는 함수\n      // username = \"forbob\";\n      userService.getUserUsername(this.$store.state.auth.user.username).then(response => {\n        this.CurrentUser = {\n          email: response.data.email,\n          password: response.data.password,\n          username: response.data.username,\n          phone: response.data.phone,\n          year: response.data.year,\n          month: response.data.month,\n          day: response.data.day,\n          name: response.data.name,\n          answer: response.data.answer\n        };\n        console.log(this.CurrentUser);\n        // console.log(response.data);\n      }).catch(err => console.log(err));\n    },\n    findArchive() {\n      if (this.watchedMovie.length == 0) {\n        this.emptyArchive = true;\n      } else {\n        this.emptyArchive = false;\n      }\n      console.log(\"findArchive\", this.watchedMovie);\n    },\n    // 로그아웃 함수 -> 공통함수 호출\n    logout() {\n      // this.$store.dispatch(\"모듈명/함수명\")\n      this.$store.dispatch(\"auth/logout\"); // 공통함수 logout 호출\n      this.$router.push(\"/\"); // 강제 홈페이지로 이동\n    },\n\n    // 영화 탑텐 조회 요청\n    // getMovieInfo() {\n    //   MovieDataService.getMovieAll()\n    //     .then((response) => {\n    //       this.movie = response.data;\n    //       console.log(response.data);\n    // \n    //     })\n    //     .catch((e) => {\n    //       console.log(e);\n    //     });\n    // },\n\n    getReservMovieInfo() {\n      // 본 영화 전체 조회 요청\n      ReservationDataService.getRespage(this.$store.state.auth.user.username, this.page - 1, this.pageSize).then(response => {\n        this.watchedMovie = response.data;\n        console.log(\"this.watchedMovie\", this.watchedMovie);\n        console.log(response.data);\n        this.findArchive(); // 예매내역(아카이브) 확인함수 추가\n\n        this.watchedMovieTotalCount = response.data.totalItems;\n        console.log(\"this.watchedMovieTotalCount\", this.watchedMovieTotalCount);\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    // 페이징\n    handlePageChange(value) {\n      this.page = value;\n      this.getReview();\n    }\n  },\n  mounted() {\n    custom();\n    this.getUser(); // 엔드 데이터\n    // this.getMovieInfo(); // 영화 탑텐\n    this.getReservMovieInfo(); // 본 영화 조회\n  }\n};","map":{"version":3,"mappings":";AA+SA;;AAEA;AACA;AACA;AACA;AACA;AAEA;EACA;EACA;EACA;EACAA;IACA;MACA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;;MACAC;MAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;MACA;MACA;MACAC,YACAC,sDACAC;QACA;UACAlB;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;QACAW;QACA;MACA,GACAC;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;MACAF;IACA;IAEA;IACAG;MACA;MACA;MACA;IACA;;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEAC;MACA;MACAC,sGACAN;QACA;QACAC;QACAA;QAEA;;QAEA;QACAA;MACA,GACAC;QACAD;MACA;IACA;IAEA;IACAM;MACA;MACA;IACA;EAEA;EACAC;IACAC;IACA;IACA;IACA;EACA;AACA","names":["data","watchedMovie","watchedMovieTotalCount","emptyArchive","CurrentUser","email","password","username","phone","year","month","day","name","answer","message","page","count","pageSize","pageSizes","methods","getUser","userService","getUserUsername","then","console","catch","findArchive","logout","getReservMovieInfo","ReservationDataService","handlePageChange","mounted","custom"],"sourceRoot":"src/components/myPage","sources":["MypageCom.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!--preloading-->\r\n    <!-- <div id=\"preloader\">\r\n      <img class=\"logo\" src=\"images/logo1.png\" alt=\"\" width=\"119\" height=\"58\" />\r\n      <div id=\"status\">\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div> -->\r\n\r\n    <!-- 상단 페이지 제목 -->\r\n    <div class=\"hero user-hero\">\r\n      <div class=\"container\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"hero-ct\">\r\n              <h1>{{ CurrentUser.name }}’s page</h1>\r\n              <ul class=\"breadcumb\">\r\n                <li class=\"active\">\r\n                  <router-link to=\"/\">Home</router-link>\r\n                </li>\r\n                <li><span class=\"ion-ios-arrow-right\"></span>MY PAGE</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page-single\">\r\n      <div class=\"container\">\r\n        <div class=\"row ipad-width\">\r\n          <!-- todo: 이부분 나브 다른 Mypage 컴포넌트들 공통 -->\r\n          <!-- 공통 왼쪽 메뉴 시작 -->\r\n          <div class=\"col-md-3 col-sm-12 col-xs-12\">\r\n            <div class=\"user-information\">\r\n              <div class=\"user-img\">\r\n                <!-- src=\"images/uploads/user-img.png\" -->\r\n                <img\r\n                  class=\"profileImg\"\r\n                  src=\"@/assets/images_choi/Views/choi/MovieDetail/user.png\"\r\n                  alt=\"\"\r\n                />\r\n                <br />\r\n              </div>\r\n              <div class=\"user-fav\">\r\n                <ul>\r\n                  <li class=\"active\">\r\n                    <router-link to=\"\">프로필</router-link>\r\n                  </li>\r\n                  <!-- 프로필 로그인 정보 표시 시작-->\r\n                  <li style=\"color: white\">\r\n                    <strong style=\"color: white\">이름 </strong>\r\n                    <label>{{ CurrentUser.name }}</label>\r\n                  </li>\r\n                  <li style=\"color: white\">\r\n                    <strong style=\"color: white\">아이디 </strong>\r\n                    <label>{{ CurrentUser.username }}</label>\r\n                  </li>\r\n                  <!-- 프로필 로그인 정보 표시 끝 -->\r\n                </ul>\r\n              </div>\r\n\r\n              <div class=\"user-fav\">\r\n                <p>Account Details</p>\r\n                <ul>\r\n                  <li class=\"active\">\r\n                    <router-link to=\"/mypage\">내정보</router-link>\r\n                  </li>\r\n                  <li>\r\n                    <router-link to=\"/myticket\">예매내역</router-link>\r\n                  </li>\r\n                  <li>\r\n                    <router-link to=\"/mywish\">찜한 영화</router-link>\r\n                  </li>\r\n                  <li>\r\n                    <router-link to=\"/myqna\">나의 문의내역</router-link>\r\n                  </li>\r\n                  <li>\r\n                    <router-link to=\"/myprofile\">개인정보 수정</router-link>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"user-fav\">\r\n                <p>Others</p>\r\n                <ul>\r\n                  <!--                  <li><a href=\"#\">Log out</a></li>-->\r\n                  <li><a href=\"#\" @click.prevent=\"logout\">Log out</a></li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- 공통 왼쪽 메뉴 끝 -->\r\n\r\n          <!-- 오른쪽 본문 내용 -->\r\n          <div class=\"col-md-9 col-sm-12 col-xs-12\">\r\n            <!-- 프로필 -->\r\n            <div class=\"col-xs-11 movie-item-style-2 userrate\">\r\n              <div class=\"row\">\r\n                <div class=\"col-xs-3 mv-user-review-item\">\r\n                  <!-- <div class=\"user-infor\"> -->\r\n                  <img\r\n                    src=\"@/assets/images_choi/Views/choi/MovieDetail/user.png\"\r\n                    alt=\"user\"\r\n                  />\r\n                  <div class=\"welcome\">\r\n                    <!-- <p>{{ CurrentUser.id }} choichoi</p> -->\r\n                    <h3>{{ CurrentUser.name }} 님</h3>\r\n                    <h3>환영해요!</h3>\r\n                    <!-- </div> -->\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"col-xs-6 mv-user-review-item\">\r\n                  <!-- <div class=\"user-infor\"> -->\r\n                  <h6>즐겨찾는 영화관</h6>\r\n                  <div>\r\n                    <table>\r\n                      <tr>\r\n                        <td>\r\n                          <h6><a href=\"#\"></a></h6>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>\r\n                          <div class=\"mv-item-infor\">\r\n                            <h6><router-link to=\"/SeomyeonCinema\">DS 서면</router-link></h6>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"mv-item-infor\">\r\n                            <h6><router-link to=\"/CentumCinema\">DS 센텀시티</router-link></h6>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"mv-item-infor\">\r\n                            <h6><a href=\"#\">영화관3</a></h6>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"col-xs-2 mv-user-review-item\">\r\n                  <h6>나의 등급</h6>\r\n                  <div>\r\n                    <img src=\"@/assets/images_jung/welcome.png\" alt=\"\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- 즐겨찾는 영화관 -->\r\n\r\n            <!-- 아카이브 -->\r\n            <div class=\"container\">\r\n              <div class=\"row ipad-width2\">\r\n                <div class=\"col-md-8 col-sm-12 col-xs-12\">\r\n                  <!-- 아카이브 나브 -->\r\n                  <div class=\"topbar-filter\">\r\n                    <!-- <router-link to =\"/archive/:moviecd\"\r\n                      ><p>나의 아카이브 <span>{{ reviewTotalCount }}</span> in total</p></router-link> -->\r\n                    <p class=\"mytitle\">나의 아카이브 <span>{{ watchedMovieTotalCount }}</span> in total</p>\r\n                    <a href=\"/mypage\" class=\"grid\"\r\n                      ><i class=\"ion-grid\"></i\r\n                    ></a>\r\n                  </div>\r\n\r\n                  <div v-if=\"emptyArchive == true\" class=\"noArchive\">\r\n                    <h3>예매내역이 없습니다.</h3>\r\n                  </div>\r\n\r\n                  <!-- 나의 아카이브 내용 시작 -->\r\n                  <!-- TODO: 예매내역 정보 받아오기 :  -->\r\n                  <div class=\"flex-wrap-movielist\" v-if=\"emptyArchive == false\">\r\n                    <!-- 아카이브 시작 -->\r\n                    <div class=\"movie-item-style-2 movie-item-style-1\" \r\n                    v-for=\"(data, index) in watchedMovie.reservation\" v-bind:key=\"index\">\r\n                        <img :src=\"data.posterurln\" alt=\"poster\" />\r\n                        <!-- 영화 라벨 -->\r\n                        <div class=\"mv-item-infor\">\r\n                          <div class=\"movieTitle-2\">\r\n                            <h6>\r\n                              <router-link :to=\"'/allMovie/' + data.moviecd\">\r\n                                <a href=\"#\">\r\n                                {{ data.movienm }}</a>\r\n                              </router-link>\r\n                            </h6>\r\n                          </div>\r\n                          <p class=\"rate\">\r\n                            <i class=\"ion-android-star\"></i\r\n                            ><span>{{ data.raiting }}</span> /5\r\n                          </p>\r\n                        </div>\r\n                      <!-- todo) 영화에 마우스 올리면 나오는 관람정보: 리뷰하러가기 -->\r\n                      <div class=\"hvr-inner\">\r\n                        <div class=\"movieTitle\">\r\n                          <h6>\r\n                            <router-link :to=\"'/allMovie/' + data.moviecd\">\r\n                              {{ data.movienm }}\r\n                              <span>({{ data.opendt }})</span>\r\n                            </router-link>\r\n                          </h6>\r\n                        </div>\r\n                        <p>\r\n                          상영시간: {{ data.showtm }}분 <br />\r\n                          관람일자 :\r\n                          {{ data.startday }}<br />\r\n                          {{ data.starttime }}  ~ {{ data.endtime }}<br>\r\n                        </p>\r\n                        <!-- <p>\r\n                          {{ data.startday }} | {{ data.starttime }} <br />\r\n                          상영시간: {{ data.showtm }}분 <br />\r\n                          감독: {{ data.directors }}\r\n                        </p> -->\r\n                        <!-- 리뷰테이블에서 사용자 평점 가져오기\r\n                        <p class=\"time sm-text\">\r\n                          나의 별점\r\n                          <i class=\"ion-android-star\"></i\r\n                          ><span>{{ data.userStarRating }}</span>\r\n                        </p> -->\r\n                        <!-- TODO: 버튼 클릭시 클릭이벤트-영화정보.movieNm 넘겨줘야함 -->\r\n                        <router-link :to=\"'/archive/' + data.moviecd\">\r\n                          나의 리뷰 작성하기\r\n                        </router-link>\r\n                        <!-- <h6>Best Musical movie</h6> -->\r\n                      </div>\r\n                      <!-- 영화에 마우스 올리면 나오는 관람정보: 리뷰를 위한 영화정보 끝 -->\r\n                    </div>\r\n                    <!-- 아카이브 끝 -->\r\n\r\n                    <!-- 아카이브 상영작 하드코딩 -->\r\n                    <!-- <div class=\"movie-item-style-2 movie-item-style-1\">\r\n                      <img :src=\"watchedMovie.posterURL\" alt=\"poster\" />\r\n                      <div class=\"hvr-inner\">\r\n                        <div class=\"movieTitle\">\r\n                          <h6>\r\n                            <router-link to=\"/movieDetail\">\r\n                              {{ watchedMovie.movieNm }}\r\n                              <span\r\n                                >({{ watchedMovie.openDt }})</span\r\n                              ></router-link\r\n                            >\r\n                          </h6>\r\n                        </div>\r\n                        <p>\r\n                          {{ watchedMovie.scheNo }} <br />\r\n                          상영시간: {{ watchedMovie.showTm }}분 <br />\r\n                          감독: {{ watchedMovie.directors }}\r\n                        </p>\r\n                        <p class=\"time sm-text\">\r\n                          나의 별점\r\n                          <i class=\"ion-android-star\"></i\r\n                          ><span>{{ reviewMovie.userStarRating }}</span>\r\n                        </p>\r\n                        <router-link to=\"/archive\" @click=\"goReview\"\r\n                          >나의 리뷰 작성하기</router-link\r\n                        >\r\n                      </div>\r\n                      <div class=\"mv-item-infor\">\r\n                        <div class=\"movieTitle-2\">\r\n                          <h6>\r\n                            <a href=\"/movieDetail\">{{\r\n                              watchedMovie.movieNm\r\n                            }}</a>\r\n                          </h6>\r\n                        </div>\r\n                        <p class=\"rate\">\r\n                          <i class=\"ion-android-star\"></i\r\n                          ><span>{{ watchedMovie.rating }}</span> /5\r\n                        </p>\r\n                      </div>\r\n                    </div> -->\r\n                  </div>\r\n                  \r\n                  <!-- 페이징 -->\r\n                  <b-pagination\r\n                        v-model=\"page\"\r\n                        :total-rows=\"watchedMovie.totalItems\"\r\n                        :per-page=\"pageSize\"\r\n                        pills\r\n                        size=\"sm\"\r\n                        prev-text=\"<\"\r\n                        next-text=\">\"\r\n                        @change=\"handlePageChange\"\r\n                    ></b-pagination>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- TODO: 탑버튼 추가 -->\r\n    <a class=\"topbutton\" href=\"#\">\r\n      <img src=\"@/assets/images_jung/iconUp_48.png\"/>\r\n    </a>\r\n          \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\n\r\n// import axios from \"axios\";   // 프로필이미지 업로드\r\nimport custom from \"@/assets/js/custom\";\r\nimport userService from \"@/services/user.service\";\r\n// import MovieDataService from \"@/services/MovieDataService\";\r\nimport ReservationDataService from \"@/services/ReservationDataService\";\r\n\r\nexport default {\r\n  // data: () => ({\r\n  //   images: \"\",\r\n  // }),\r\n  data() {\r\n    return {\r\n      // movie: [],    // 전체 탑텐 영화\r\n      watchedMovie: [],   // 예매한 영화\r\n      watchedMovieTotalCount: 0,  // 본 영화 갯수\r\n\r\n      emptyArchive: true, // 아카이브 없는지 체크\r\n\r\n      CurrentUser: {\r\n        email: \"\",\r\n        password: \"\",\r\n        username: \"\",\r\n        phone: null,\r\n        year: null,\r\n        month: null,\r\n        day: null,\r\n        name: \"\",\r\n        answer: \"\", // 비번확인용 정답\r\n      },\r\n      message: \"\",\r\n\r\n      // 페이징을 위한 변수 정의\r\n      page: 1, // 현재 페이지\r\n      count: 0, // 전체 데이터 건수\r\n      pageSize: 5, // 한페이지당 몇개를 화면에 보여줄지 결정하는 변수\r\n      pageSizes: [5, 10, 15], // select box 에 넣을 기본 데이터\r\n    };\r\n  },\r\n  methods: {\r\n    getUser() {\r\n      // 종학이 백엔드 데이터 받는 함수\r\n      // username = \"forbob\";\r\n      userService\r\n        .getUserUsername(this.$store.state.auth.user.username)\r\n        .then((response) => {\r\n          this.CurrentUser = {\r\n            email: response.data.email,\r\n            password: response.data.password,\r\n            username: response.data.username,\r\n            phone: response.data.phone,\r\n            year: response.data.year,\r\n            month: response.data.month,\r\n            day: response.data.day,\r\n            name: response.data.name,\r\n            answer: response.data.answer,\r\n          };\r\n          console.log(this.CurrentUser);\r\n          // console.log(response.data);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n\r\n    findArchive() {\r\n      if(this.watchedMovie.length == 0) {\r\n        this.emptyArchive = true;\r\n      } else {\r\n        this.emptyArchive = false;\r\n      }\r\n      console.log(\"findArchive\", this.watchedMovie);\r\n    },\r\n\r\n    // 로그아웃 함수 -> 공통함수 호출\r\n    logout() {\r\n      // this.$store.dispatch(\"모듈명/함수명\")\r\n      this.$store.dispatch(\"auth/logout\"); // 공통함수 logout 호출\r\n      this.$router.push(\"/\"); // 강제 홈페이지로 이동\r\n    },\r\n    // 영화 탑텐 조회 요청\r\n    // getMovieInfo() {\r\n    //   MovieDataService.getMovieAll()\r\n    //     .then((response) => {\r\n    //       this.movie = response.data;\r\n    //       console.log(response.data);\r\n  // \r\n    //     })\r\n    //     .catch((e) => {\r\n    //       console.log(e);\r\n    //     });\r\n    // },\r\n\r\n    getReservMovieInfo() {\r\n    // 본 영화 전체 조회 요청\r\n      ReservationDataService.getRespage(this.$store.state.auth.user.username, this.page -1, this.pageSize)\r\n        .then((response) => {\r\n          this.watchedMovie = response.data;\r\n          console.log(\"this.watchedMovie\", this.watchedMovie);\r\n          console.log(response.data);\r\n\r\n          this.findArchive();  // 예매내역(아카이브) 확인함수 추가\r\n\r\n          this.watchedMovieTotalCount = response.data.totalItems;\r\n          console.log(\"this.watchedMovieTotalCount\", this.watchedMovieTotalCount);\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n\r\n    // 페이징\r\n    handlePageChange(value){\r\n    this.page = value;\r\n    this.getReview();\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    custom();\r\n    this.getUser(); // 엔드 데이터\r\n    // this.getMovieInfo(); // 영화 탑텐\r\n    this.getReservMovieInfo(); // 본 영화 조회\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.box-image {\r\n  width: 55px;\r\n  height: 70px;\r\n}\r\n\r\n.movie-detail-content {\r\n  padding-left: 0;\r\n}\r\n\r\n.movie-detail-content-bottom {\r\n  padding-bottom: 10px;\r\n}\r\n\r\n/* 영화제목 div 크기지정 */\r\n.movieTitle {\r\n  height: 50px;\r\n}\r\n.movieTitle-2 {\r\n  height: 35px;\r\n}\r\n\r\n/* 배경이미지 : 아리걸로 통일 */\r\n.user-hero {\r\n  background: url(@/assets/images_jung/movie-theater02.jpg) no-repeat;\r\n  /* height: 598px; */\r\n  width: 100%;\r\n}\r\n\r\n/* 마이페이지-프로필 이미지크기 수정 */\r\n.profileImg {\r\n  -ms-interpolation-mode: bicubic;\r\n  border: 0;\r\n  /* height: auto; */\r\n  max-height: 120px;\r\n  /* max-width: 100%; */\r\n  max-width: 120px;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* 환영, 아카이브없음 글자색 변경 */\r\n.welcome {\r\n  color: rgb(221, 252, 56);\r\n}\r\n\r\n/* 예매내역 없음 */\r\n.noArchive{\r\n  color:lightslategray;\r\n}\r\n\r\n.mytitle{\r\n  color: azure;\r\n}\r\n\r\n/* TODO: 탑버튼 추가 */\r\n.topbutton{\r\n    position:fixed; bottom:15px; right:15px; width:40px; height:40px; z-index:1; opacity:0.8;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}